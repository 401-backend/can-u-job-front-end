(this["webpackJsonpcan-u-front-end"]=this["webpackJsonpcan-u-front-end"]||[]).push([[0],{181:function(e,t,n){e.exports=n(400)},186:function(e,t,n){},191:function(e,t,n){},292:function(e,t){},294:function(e,t){},331:function(e,t){},332:function(e,t){},388:function(e,t,n){},389:function(e,t,n){},390:function(e,t,n){},391:function(e,t,n){},392:function(e,t,n){},393:function(e,t,n){},394:function(e,t,n){},395:function(e,t,n){},396:function(e,t,n){},397:function(e,t,n){},398:function(e,t,n){},399:function(e,t,n){},400:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(66),o=n.n(r),c=(n(186),n(11)),i=n(16),u=n.n(i),s=n(7),d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?t:null},m=function(e){return l.a.Children.map(e.children,(function(t){return l.a.cloneElement(t,{condition:e.condition})}))},f=function(e){return d(e.condition,e.children)},b=function(e){return d(!e.condition,e.children)},h=function(e){return d(e.condition,e.children)},p=n(402),E=n(401),g=n(67),v=n(22),j=function(e){var t=Object(a.useState)({}),n=Object(c.a)(t,2),l=n[0],r=n[1];return{handleChange:function(e){e.persist(),r((function(t){return Object(v.a)({},t,Object(g.a)({},e.target.name,e.target.value))}))},handleSubmit:function(t){t&&t.preventDefault(),e(l)},values:l}},y=(n(191),Object(E.a)({form:"jobs"})((function(e){var t=j(e.handleSubmit),n=t.handleChange,a=t.handleSubmit;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"formDiv"},l.a.createElement("h3",null,"Add a Job"),l.a.createElement("form",{className:"jobForm",onChange:n,onSubmit:a},l.a.createElement("label",null,l.a.createElement("span",null,"Job"),l.a.createElement(p.a,{name:"name",component:"input",placeholder:"Add Job"})),l.a.createElement("label",null,l.a.createElement("span",null,"Price"),l.a.createElement(p.a,{name:"price",type:"number",component:"input",placeholder:"Price"})),l.a.createElement("label",null,l.a.createElement("span",null,"Description"),l.a.createElement(p.a,{name:"description",type:"textarea",component:"input"})),l.a.createElement("button",{id:"addJobButton"},"Add Job"))))}))),O=n(26),S=n.n(O),k=(n(388),Object(s.b)((function(e){return{user:e.login,jobs:e.jobs}}),(function(e,t){return{}}))((function(e){var t=S.a.verify(e.user.token,"sauce").username,n=e.jobs.jobList.filter((function(e){return e.postedUser===t})).map((function(t){return l.a.createElement("tr",{id:"jobRow",key:t._id},l.a.createElement("td",null,t.name),l.a.createElement("td",null,"$",t.price),l.a.createElement("td",null,t.isOpen?"Open":"Closed"),l.a.createElement("td",{className:"jobButtons"},l.a.createElement("button",{onClick:function(){return e.handleDelete(t)}},"Delete")),l.a.createElement("td",{className:"jobButtons"},l.a.createElement("button",{onClick:function(){return e.handleDetails(t._id)}},"Details")),l.a.createElement("td",{className:"jobButtons"},l.a.createElement("button",{onClick:function(){return e.handleCloseJob(t._id)}},"Close Job")))}));return l.a.createElement("div",{className:"myjob-table"},l.a.createElement("h3",null,"My Jobs"),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",{id:"headings",key:"headings"},l.a.createElement("td",null,"Name"),l.a.createElement("td",null,"Bid"),l.a.createElement("td",null,"Status")),n)))}))),C=(n(389),function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dashBoardDiv"},l.a.createElement(y,{handleSubmit:e.addJob}),l.a.createElement(k,{jobs:e.jobs,handleDetails:e.handleDetails,handleDelete:e.handleDelete,handleCloseJob:e.handleCloseJob})))}),D=n(172),w=n(173),L=n(178),N=n(174),B=n(179),I=(n(390),function(e){function t(){return Object(D.a)(this,t),Object(L.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(B.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return l.a.createElement("footer",null,l.a.createElement("section",null,l.a.createElement("p",null,"\xa9 Can-U 2020")))}}]),t}(l.a.Component)),T=(n(391),Object(s.b)((function(e){return{login:e.login}}))((function(e){return l.a.createElement("header",null,l.a.createElement("h1",null,"CanU"))}))),U=(n(392),function(e){return l.a.createElement("div",{className:"modal"},l.a.createElement("div",null,l.a.createElement("header",null,l.a.createElement("span",{className:"title"},e.title),l.a.createElement("button",{onClick:e.close},"X")),l.a.createElement("div",null,e.children)))}),J=(n(393),Object(s.b)((function(e){return{login:e.login}}))((function(e){var t=e.item||{},n=Object(a.useState)(0),r=Object(c.a)(n,2),o=r[0],i=r[1],u=Object(a.useState)(),s=Object(c.a)(u,2),d=s[0],m=s[1],f=Object(a.useState)(t.currentBidder),b=Object(c.a)(f,2),h=b[0],p=b[1];return l.a.createElement(U,{title:"Job",close:e.handleDetails},l.a.createElement("div",{className:"modal-container"},l.a.createElement("div",{id:"description-container"},l.a.createElement("div",{id:"description-1"},l.a.createElement("span",null,"Name: ",t.name),l.a.createElement("span",null,"Description: ",t.description),l.a.createElement("span",null,"Posted by: ",t.postedUser)),l.a.createElement("div",{id:"description-2"},l.a.createElement("span",null,"Current Bid: $",t.price),l.a.createElement("span",null,"Current Bidder: ",h))),l.a.createElement("label",null,l.a.createElement("span",null,"Bid Amount: $"),l.a.createElement("input",{id:"bid",onChange:function(e){return i(e.target.value)}})),l.a.createElement("div",null,l.a.createElement("button",{id:"modal-button",onClick:function(){o<=0?alert("Bid must be greater than $0"):e.placeBid(t._id,o),o>=t.price&&o>0?alert("Must bid less than current price of ".concat(t.price)):e.placeBid(t._id,o),o<t.price&&o>0&&(m("You are now the leading bidder!"),p(e.login.user.username))}},"Place Bid")),l.a.createElement("p",null,d)))}))),P=Object(s.b)((function(e){return{login:e.login}}))((function(e){var t=!1,n={};try{n=e.login.token?S.a.verify(e.login.token,"sauce"):{},t=e.login.loggedIn&&(!e.capability||n.capabilities.includes(e.capability))}catch(a){}return l.a.createElement(m,{condition:t},l.a.createElement(f,null,l.a.createElement("div",null,e.children)))}));n(394);var _=function(e){var t=e.jobs.filter((function(e){return e.isOpen})).map((function(t){return l.a.createElement("tr",{id:"jobRow",key:t._id},l.a.createElement("td",null,t.name),l.a.createElement("td",null,t.price),l.a.createElement("td",null,t.currentBidder),l.a.createElement("td",null,t.postedUser),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return e.handleDetails(t._id)}},"Details")),l.a.createElement(P,{capability:"superuser"},l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return e.handleDelete(t)}},"Delete"))))}));return l.a.createElement("div",{className:"jobList-table"},l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("h2",null,"Job Board"),l.a.createElement("tr",{id:"headings",key:"headings"},l.a.createElement("td",null,"Name"),l.a.createElement("td",null,"Bid"),l.a.createElement("td",null,"Current Bidder"),l.a.createElement("td",null,"Owner")),t)))},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;return fetch(e,{method:t,mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a},body:n?JSON.stringify(n):void 0}).then((function(e){return e.json()})).then((function(e){return"function"===typeof l?l(e):e})).catch((function(e){return"function"===typeof r?r(e):console.error(e)}))},A="https://dry-shore-68165.herokuapp.com",F=function(e){return{type:"GET",payload:e}},W=function(e){return{type:"POST",payload:e}},$=function(e){return{type:"DELETE",payload:e}},x=function(e){return function(t){return(n="".concat(A,"/signin"),a=e,fetch(n,{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Basic ".concat(a)},body:void 0}).then((function(e){return e.text()})).then((function(e){return'{"error":"Invalid User ID/Password"}'===e?{loggedIn:!1,data:null,loginStatus:!1}:(u.a.save("auth",e),{loggedIn:!0,data:e,loginStatus:!0})})).catch((function(e){return"function"===typeof l?l(e):console.error(e)}))).then((function(e){return t(M(e))}));var n,a,l}},M=function(e){return{type:"LOGIN",payload:e}},R=function(e){return function(t){return(n="".concat(A,"/signup"),a=e,fetch(n,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0}).then((function(e){return console.log(e.status),500===e.status?"username taken":e.text()})).catch((function(e){return"function"===typeof l?l(e):console.error(e)}))).then((function(e){t("username taken"===e?X(e):z(e))}));var n,a,l}},z=function(e){return{type:"SIGN_UP_SUCCESS",payload:e}},X=function(e){return{type:"SIGN_UP_FAIL",payload:e}},Y=Object(s.b)((function(e){return{login:e.login}}),(function(e,t){return{handleLogout:function(){return e({type:"LOGOUT",payload:t});var t}}}))((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{onClick:function(){e.handleLogout()}},"Log Out"))})),q=(n(395),function(e){return l.a.createElement("div",{id:"nav"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("span",{onClick:function(){return e.setScreen("dashboard")}},"Dashboard")),l.a.createElement("li",null,l.a.createElement("span",{onClick:function(){return e.setScreen("main")}},"Main")),l.a.createElement("li",null,l.a.createElement(Y,null))))}),H=(n(396),Object(s.b)((function(e){return{login:e.login}}),(function(e,t){return{handleSignIn:function(t){return e(x(t))}}}))((function(e){var t=Object(a.useState)(""),n=Object(c.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)(""),u=Object(c.a)(i,2),s=u[0],d=u[1],m=Object(a.useState)(),f=Object(c.a)(m,2),b=f[0],h=f[1],p=function(e){switch(e.target.name){case"username":o(e.target.value);break;case"password":d(e.target.value)}};return Object(a.useEffect)((function(){!1===e.login.loginStatus&&h("Invalid Username/Password")}),[e.login.loginStatus]),l.a.createElement("div",{className:"signInDiv"},l.a.createElement("form",{className:"signInForm",onSubmit:function(t){t.preventDefault();var n=btoa("".concat(r,":").concat(s));e.handleSignIn(n)}},l.a.createElement("input",{placeholder:"username",name:"username",onChange:p}),l.a.createElement("input",{placeholder:"password",name:"password",onChange:p,type:"password"}),l.a.createElement("input",{id:"loginButton",type:"submit",value:"Log In"})),l.a.createElement("p",null,b),l.a.createElement("p",{className:"loginSwitch",onClick:function(){e.switchLogin("signup")},style:{cursor:"pointer"}},"Not a member?.. click to sign up"))}))),K=(n(397),Object(s.b)((function(e){return{login:e.login}}),(function(e,t){return{handleSignUp:function(t){return e(R(t))}}}))((function(e){var t=Object(a.useState)(""),n=Object(c.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)(""),u=Object(c.a)(i,2),s=u[0],d=u[1],m=Object(a.useState)(""),f=Object(c.a)(m,2),b=f[0],h=f[1],p=function(e){switch(e.target.name){case"username":o(e.target.value);break;case"password":d(e.target.value);break;case"email":h(e.target.value)}};return l.a.createElement("div",{id:"signUpDiv"},l.a.createElement("form",{className:"signUpForm",onSubmit:function(t){t.preventDefault();var n={username:r,password:s,email:b};e.handleSignUp(n)}},l.a.createElement("label",null,l.a.createElement("input",{placeholder:"email",name:"email",onChange:p,type:"email"})),l.a.createElement("label",null,l.a.createElement("input",{placeholder:"username",name:"username",onChange:p})),l.a.createElement("label",null,l.a.createElement("input",{placeholder:"password",name:"password",onChange:p,type:"password",minLength:"6"})),l.a.createElement("input",{id:"loginButton",type:"submit",value:"Sign Up"})),l.a.createElement("p",null,e.login.signupStatus),l.a.createElement("p",{className:"loginSwitch",onClick:function(){e.switchLogin("signin")},style:{cursor:"pointer"}},"Already a member?.. click to login"))}))),Q=function(e){var t=Object(a.useState)("signin"),n=Object(c.a)(t,2),r=n[0],o=n[1],i=function(e){o(e)};return l.a.createElement("div",null,l.a.createElement(m,{condition:"signup"===r},l.a.createElement(f,null,l.a.createElement(K,{switchLogin:i})),l.a.createElement(b,null,l.a.createElement(H,{switchLogin:i}))))},V=(n(398),function(e){return l.a.createElement("div",{className:"splashDiv"},l.a.createElement("h1",null,"Welcome to Can-U"),l.a.createElement("p",{id:"p"},"Do you need help moving? mowing your lawn? setting up ikea furniture? There are not a lot of options to find handy help. Search for handy people across the nation!"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("img",{src:"./assets/001-auction.png"})," Create a job, and let people bid to do that job for you!"),l.a.createElement("li",null,l.a.createElement("img",{src:"./assets/002-bid.png"}),"Whoever bids the lowest amount of money to do that job, wins!"),l.a.createElement("li",null,l.a.createElement("img",{src:"./assets/004-spyglass.png"}),"Also look for jobs that you can do!")),l.a.createElement(Q,null))});n(399);var Z=Object(s.b)((function(e){return{jobs:e.jobs,login:e.login}}),(function(e,t){return{handleGetJobs:function(){return e((function(e){return G("".concat(A,"/jobs"),"GET").then((function(t){return e(F(t.results))})).catch(console.error)}))},handleDetails:function(t){return e({type:"DETAILS",payload:t})},handlePost:function(t){return e((n=t,function(e){return G("".concat(A,"/jobs"),"POST",n,n.token).then((function(t){return e(W(t))})).catch(console.error)}));var n},handleToggle:function(t){return e({type:"TOGGLE",payload:t})},handleDelete:function(t){return e((n=t,function(e){return G("".concat(A,"/jobs/").concat(n._id),"DELETE","",n.token).then((function(){return e($(n.id))})).catch((function(e){return console.log(e)}))}));var n},handlePlaceBid:function(t,n){return e((a=t,function(e){return G("".concat(A,"/jobs/bid/").concat(a.id),"PUT",a.body,a.token).then((function(e){return console.log(e)}))}));var a},handleGetUsers:function(t){return e((n=t,function(e){return G("".concat(A,"/users"),"GET","",n.token).then((function(e){return console.log(e)}))}));var n},handleCloseJob:function(t){return e((n=t,function(e){return G("".concat(A,"/jobs/close/").concat(n.id),"PUT",void 0,n.token).then((function(e){return console.log(e)}))}));var n}}}))((function(e){var t=Object(a.useState)("dashboard"),n=Object(c.a)(t,2),r=n[0],o=n[1],i=function(t){var n=u.a.load("auth");t.token=n,e.handleDelete(t)},s=function(t){e.handleDetails(t)},d=function(t,n){console.log(e.jobs.jobList[0]._id);var a=u.a.load("auth"),l={price:n};e.handlePlaceBid({id:t,body:l,token:a})};return Object(a.useEffect)((function(){e.handleGetJobs()})),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"App"},l.a.createElement(T,null),l.a.createElement(m,{condition:!e.login.loggedIn},l.a.createElement(f,null,l.a.createElement(V,null)),l.a.createElement(b,null,l.a.createElement(q,{setScreen:o}),l.a.createElement(h,{condition:"main"===r},l.a.createElement(_,{jobs:e.jobs.jobList,handleDetails:s,handleDelete:i,handleBid:d})),l.a.createElement(h,{condition:"dashboard"===r},l.a.createElement(C,{addJob:function(t){var n=u.a.load("auth");t.token=n,t.complete=!1,e.handlePost(t)},jobs:e.jobs.jobList,handleDetails:s,handleDelete:i,handleCloseJob:function(t){var n=u.a.load("auth");e.handleCloseJob({id:t,token:n})}})),l.a.createElement(h,{condition:e.jobs.showDetails},l.a.createElement(J,{handleDetails:s,item:e.jobs.details,placeBid:d})),l.a.createElement(I,null)))))})),ee=n(8),te=n(175),ne=n(403),ae=n(176),le=n(177),re={jobList:[{}],showDetails:null,details:{}},oe=u.a.load("auth");console.log(oe);var ce=oe||null;console.log(ce);var ie={token:ce,loggedIn:!!ce,signupStatus:null,loginStatus:null,user:ce?S.a.verify(ce,"sauce"):null},ue=Object(ee.combineReducers)({jobs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"DETAILS":var l=e.jobList.filter((function(e){return e._id===a}))[0]||{};return Object(v.a)({},e,{showDetails:!e.showDetails,details:l});case"GET":return Object(v.a)({},e,{jobList:a});case"POST":return Object(v.a)({},e,{jobList:[].concat(Object(le.a)(e.jobList),[a])});case"TOGGLE":return Object(v.a)({},e,{jobList:e.todoList.map((function(e){return e._id===a?Object(v.a)({},e,{complete:!e.complete}):e}))});case"DELETE":return Object(v.a)({},e,{jobList:e.jobList.filter((function(e){return e._id!==a}))});default:return e}},form:ne.a,login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"LOGIN":var l;return l=a.data?S.a.verify(a.data,"sauce"):null,{token:a.data,loggedIn:a.loggedIn,loginStatus:a.loginStatus,user:l};case"SIGN_UP_SUCCESS":return u.a.save("auth",a),{token:a,loggedIn:!0,user:S.a.verify(a,"sauce")||null};case"SIGN_UP_FAIL":return{signupStatus:a};case"LOGOUT":return u.a.remove("auth"),{token:null,loggedIn:!1,signupStatus:null,loginStatus:null,user:""};default:return e}}}),se=function(){return Object(ee.createStore)(ue,Object(te.composeWithDevTools)(Object(ee.applyMiddleware)(ae.a)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=se();o.a.render(l.a.createElement(s.a,{store:de},l.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[181,1,2]]]);
//# sourceMappingURL=main.7e98188e.chunk.js.map