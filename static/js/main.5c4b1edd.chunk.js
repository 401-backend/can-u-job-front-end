(this["webpackJsonpcan-u-front-end"]=this["webpackJsonpcan-u-front-end"]||[]).push([[0],{181:function(e,n,t){e.exports=t(400)},186:function(e,n,t){},191:function(e,n,t){},292:function(e,n){},294:function(e,n){},331:function(e,n){},332:function(e,n){},388:function(e,n,t){},389:function(e,n,t){},390:function(e,n,t){},391:function(e,n,t){},392:function(e,n,t){},393:function(e,n,t){},394:function(e,n,t){},395:function(e,n,t){},396:function(e,n,t){},397:function(e,n,t){},398:function(e,n,t){},399:function(e,n,t){},400:function(e,n,t){"use strict";t.r(n);var a=t(0),l=t.n(a),r=t(66),o=t.n(r),c=(t(186),t(11)),i=t(16),u=t.n(i),s=t(7),d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?n:null},m=function(e){return l.a.Children.map(e.children,(function(n){return l.a.cloneElement(n,{condition:e.condition})}))},f=function(e){return d(e.condition,e.children)},b=function(e){return d(!e.condition,e.children)},h=function(e){return d(e.condition,e.children)},p=t(402),E=t(401),g=t(67),v=t(22),j=function(e){var n=Object(a.useState)({}),t=Object(c.a)(n,2),l=t[0],r=t[1];return{handleChange:function(e){e.persist(),r((function(n){return Object(v.a)({},n,Object(g.a)({},e.target.name,e.target.value))}))},handleSubmit:function(n){n&&n.preventDefault(),e(l)},values:l}},y=(t(191),Object(E.a)({form:"jobs"})((function(e){var n=j(e.handleSubmit),t=n.handleChange,a=n.handleSubmit;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"formDiv"},l.a.createElement("h3",null,"Add a Job"),l.a.createElement("form",{className:"jobForm",onChange:t,onSubmit:a},l.a.createElement("label",null,l.a.createElement("span",null,"Job"),l.a.createElement(p.a,{name:"name",component:"input",placeholder:"Add Job"})),l.a.createElement("label",null,l.a.createElement("span",null,"Price"),l.a.createElement(p.a,{name:"price",type:"number",component:"input",placeholder:"Price"})),l.a.createElement("label",null,l.a.createElement("span",null,"Description"),l.a.createElement(p.a,{name:"description",type:"textarea",component:"input"})),l.a.createElement("button",{id:"addJobButton"},"Add Job"))))}))),O=t(26),S=t.n(O),k=(t(388),Object(s.b)((function(e){return{user:e.login,jobs:e.jobs}}),(function(e,n){return{}}))((function(e){var n=S.a.verify(e.user.token,"sauce").username,t=e.jobs.jobList.filter((function(e){return e.postedUser===n})).map((function(n){return l.a.createElement("tr",{id:"jobRow",key:n._id},l.a.createElement("td",null,n.name),l.a.createElement("td",null,"$",n.price),l.a.createElement("td",null,n.isOpen?"Open":"Closed"),l.a.createElement("td",{className:"jobButtons"},l.a.createElement("button",{onClick:function(){return e.handleDelete(n)}},"Delete")),l.a.createElement("td",{className:"jobButtons"},l.a.createElement("button",{onClick:function(){return e.handleDetails(n._id)}},"Details")),l.a.createElement("td",{className:"jobButtons"},l.a.createElement("button",{onClick:function(){return e.handleCloseJob(n._id)}},"Close Job")))}));return l.a.createElement("div",{className:"myjob-table"},l.a.createElement("h3",null,"My Jobs"),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",{id:"headings",key:"headings"},l.a.createElement("td",null,"Name"),l.a.createElement("td",null,"Bid"),l.a.createElement("td",null,"Status")),t)))}))),D=(t(389),function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dashBoardDiv"},l.a.createElement(y,{handleSubmit:e.addJob}),l.a.createElement(k,{jobs:e.jobs,handleDetails:e.handleDetails,handleDelete:e.handleDelete,handleCloseJob:e.handleCloseJob})))}),C=t(172),w=t(173),L=t(178),N=t(174),B=t(179),I=(t(390),function(e){function n(){return Object(C.a)(this,n),Object(L.a)(this,Object(N.a)(n).apply(this,arguments))}return Object(B.a)(n,e),Object(w.a)(n,[{key:"render",value:function(){return l.a.createElement("footer",null,l.a.createElement("section",null,l.a.createElement("p",null,"\xa9 Can-U 2020")))}}]),n}(l.a.Component)),T=(t(391),Object(s.b)((function(e){return{login:e.login}}))((function(e){return l.a.createElement("header",null,l.a.createElement("h1",null,"CanU"))}))),U=(t(392),function(e){return l.a.createElement("div",{className:"modal"},l.a.createElement("div",null,l.a.createElement("header",null,l.a.createElement("span",{className:"title"},e.title),l.a.createElement("button",{onClick:e.close},"X")),l.a.createElement("div",null,e.children)))}),J=(t(393),Object(s.b)((function(e){return{login:e.login}}))((function(e){var n=e.item||{},t=Object(a.useState)(0),r=Object(c.a)(t,2),o=r[0],i=r[1],u=Object(a.useState)(),s=Object(c.a)(u,2),d=s[0],m=s[1],f=Object(a.useState)(n.currentBidder),b=Object(c.a)(f,2),h=b[0],p=b[1];return l.a.createElement(U,{title:"Job",close:e.handleDetails},l.a.createElement("div",{className:"modal-container"},l.a.createElement("div",{id:"description-container"},l.a.createElement("div",{id:"description-1"},l.a.createElement("span",null,"Name: ",n.name),l.a.createElement("span",null,"Description: ",n.description),l.a.createElement("span",null,"Posted by: ",n.postedUser)),l.a.createElement("div",{id:"description-2"},l.a.createElement("span",null,"Current Bid: $",n.price),l.a.createElement("span",null,"Current Bidder: ",h))),l.a.createElement("label",null,l.a.createElement("span",null,"Bid Amount: $"),l.a.createElement("input",{id:"bid",onChange:function(e){return i(e.target.value)}})),l.a.createElement("div",null,l.a.createElement("button",{id:"modal-button",onClick:function(){o<=0?alert("Bid must be greater than $0"):e.placeBid(n._id,o),o>=n.price&&o>0?alert("Must bid less than current price of ".concat(n.price)):e.placeBid(n._id,o),o<n.price&&o>0&&(m("You are now the leading bidder!"),p(e.login.user.username))}},"Place Bid")),l.a.createElement("p",null,d)))}))),P=Object(s.b)((function(e){return{login:e.login}}))((function(e){var n=!1,t={};try{t=e.login.token?S.a.verify(e.login.token,"sauce"):{},n=e.login.loggedIn&&(!e.capability||t.capabilities.includes(e.capability))}catch(a){}return l.a.createElement(m,{condition:n},l.a.createElement(f,null,l.a.createElement("div",null,e.children)))}));t(394);var _=function(e){var n=e.jobs.filter((function(e){return e.isOpen})).map((function(n){return l.a.createElement("tr",{id:"jobRow",key:n._id},l.a.createElement("td",null,n.name),l.a.createElement("td",null,n.price),l.a.createElement("td",null,n.currentBidder),l.a.createElement("td",null,n.postedUser),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return e.handleDetails(n._id)}},"Details")),l.a.createElement(P,{capability:"superuser"},l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return e.handleDelete(n)}},"Delete"))))}));return l.a.createElement("div",{className:"jobList-table"},l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("h2",null,"Job Board"),l.a.createElement("tr",{id:"headings",key:"headings"},l.a.createElement("td",null,"Name"),l.a.createElement("td",null,"Bid"),l.a.createElement("td",null,"Current Bidder"),l.a.createElement("td",null,"Owner")),n)))},G=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get",t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;return fetch(e,{method:n,mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a},body:t?JSON.stringify(t):void 0}).then((function(e){return e.json()})).then((function(e){return"function"===typeof l?l(e):e})).catch((function(e){return"function"===typeof r?r(e):console.error(e)}))},A="https://dry-shore-68165.herokuapp.com",F=function(e){return{type:"GET",payload:e}},$=function(e){return{type:"POST",payload:e}},x=function(e){return{type:"DELETE",payload:e}},M=function(e){return function(n){return(t="".concat(A,"/signin"),a=e,fetch(t,{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Basic ".concat(a)},body:void 0}).then((function(e){return e.text()})).then((function(e){return'{"error":"Invalid User ID/Password"}'===e?{loggedIn:!1,data:null,loginStatus:!1}:(u.a.save("auth",e),{loggedIn:!0,data:e,loginStatus:!0})})).catch((function(e){return"function"===typeof l?l(e):console.error(e)}))).then((function(e){return n(W(e))}));var t,a,l}},W=function(e){return{type:"LOGIN",payload:e}},R=function(e){return function(n){return(t="".concat(A,"/signup"),a=e,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0}).then((function(e){return console.log(e.status),500===e.status?"username taken":e.text()})).catch((function(e){return"function"===typeof l?l(e):console.error(e)}))).then((function(e){n("username taken"===e?X(e):z(e))}));var t,a,l}},z=function(e){return{type:"SIGN_UP_SUCCESS",payload:e}},X=function(e){return{type:"SIGN_UP_FAIL",payload:e}},Y=Object(s.b)((function(e){return{login:e.login}}),(function(e,n){return{handleLogout:function(){return e({type:"LOGOUT",payload:n});var n}}}))((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{onClick:function(){e.handleLogout()}},"Log Out"))})),q=(t(395),function(e){return l.a.createElement("div",{id:"nav"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("span",{onClick:function(){return e.setScreen("dashboard")}},"Dashboard")),l.a.createElement("li",null,l.a.createElement("span",{onClick:function(){return e.setScreen("main")}},"Main")),l.a.createElement("li",null,l.a.createElement(Y,null))))}),H=(t(396),Object(s.b)((function(e){return{login:e.login}}),(function(e,n){return{handleSignIn:function(n){return e(M(n))}}}))((function(e){var n=Object(a.useState)(""),t=Object(c.a)(n,2),r=t[0],o=t[1],i=Object(a.useState)(""),u=Object(c.a)(i,2),s=u[0],d=u[1],m=Object(a.useState)(),f=Object(c.a)(m,2),b=f[0],h=f[1],p=function(e){switch(e.target.name){case"username":o(e.target.value);break;case"password":d(e.target.value)}};return Object(a.useEffect)((function(){!1===e.login.loginStatus&&h("Invalid Username/Password")}),[e.login.loginStatus]),l.a.createElement("div",{className:"signInDiv"},l.a.createElement("form",{className:"signInForm",onSubmit:function(n){n.preventDefault();var t=btoa("".concat(r,":").concat(s));e.handleSignIn(t)}},l.a.createElement("input",{placeholder:"username",name:"username",onChange:p}),l.a.createElement("input",{placeholder:"password",name:"password",onChange:p,type:"password"}),l.a.createElement("input",{id:"loginButton",type:"submit",value:"Log In"})),l.a.createElement("p",null,b),l.a.createElement("p",{className:"loginSwitch",onClick:function(){e.switchLogin("signup")},style:{cursor:"pointer"}},"Not a member?.. click to sign up"))}))),K=(t(397),Object(s.b)((function(e){return{login:e.login}}),(function(e,n){return{handleSignUp:function(n){return e(R(n))}}}))((function(e){var n=Object(a.useState)(""),t=Object(c.a)(n,2),r=t[0],o=t[1],i=Object(a.useState)(""),u=Object(c.a)(i,2),s=u[0],d=u[1],m=Object(a.useState)(""),f=Object(c.a)(m,2),b=f[0],h=f[1],p=function(e){switch(e.target.name){case"username":o(e.target.value);break;case"password":d(e.target.value);break;case"email":h(e.target.value)}};return l.a.createElement("div",{id:"signUpDiv"},l.a.createElement("form",{className:"signUpForm",onSubmit:function(n){n.preventDefault();var t={username:r,password:s,email:b};e.handleSignUp(t)}},l.a.createElement("label",null,l.a.createElement("input",{placeholder:"email",name:"email",onChange:p,type:"email"})),l.a.createElement("label",null,l.a.createElement("input",{placeholder:"username",name:"username",onChange:p})),l.a.createElement("label",null,l.a.createElement("input",{placeholder:"password",name:"password",onChange:p,type:"password",minLength:"6"})),l.a.createElement("input",{id:"loginButton",type:"submit",value:"Sign Up"})),l.a.createElement("p",null,e.login.signupStatus),l.a.createElement("p",{className:"loginSwitch",onClick:function(){e.switchLogin("signin")},style:{cursor:"pointer"}},"Already a member?.. click to login"))}))),Q=function(e){var n=Object(a.useState)("signin"),t=Object(c.a)(n,2),r=t[0],o=t[1],i=function(e){o(e)};return l.a.createElement("div",null,l.a.createElement(m,{condition:"signup"===r},l.a.createElement(f,null,l.a.createElement(K,{switchLogin:i})),l.a.createElement(b,null,l.a.createElement(H,{switchLogin:i}))))},V=(t(398),function(e){return l.a.createElement("div",{className:"splashDiv"},l.a.createElement("h1",null,"Welcome to Can-U"),l.a.createElement("p",null,"Do you need help moving? mowing your lawn? setting up ikea furniture? There are not a lot of options to find handy help. Search for handy people across the nation!"),l.a.createElement(Q,null))});t(399);var Z=Object(s.b)((function(e){return{jobs:e.jobs,login:e.login}}),(function(e,n){return{handleGetJobs:function(){return e((function(e){return G("".concat(A,"/jobs"),"GET").then((function(n){return e(F(n.results))})).catch(console.error)}))},handleDetails:function(n){return e({type:"DETAILS",payload:n})},handlePost:function(n){return e((t=n,function(e){return G("".concat(A,"/jobs"),"POST",t,t.token).then((function(n){return e($(n))})).catch(console.error)}));var t},handleToggle:function(n){return e({type:"TOGGLE",payload:n})},handleDelete:function(n){return e((t=n,function(e){return G("".concat(A,"/jobs/").concat(t._id),"DELETE","",t.token).then((function(){return e(x(t.id))})).catch((function(e){return console.log(e)}))}));var t},handlePlaceBid:function(n,t){return e((a=n,function(e){return G("".concat(A,"/jobs/bid/").concat(a.id),"PUT",a.body,a.token).then((function(e){return console.log(e)}))}));var a},handleGetUsers:function(n){return e((t=n,function(e){return G("".concat(A,"/users"),"GET","",t.token).then((function(e){return console.log(e)}))}));var t},handleCloseJob:function(n){return e((t=n,function(e){return G("".concat(A,"/jobs/close/").concat(t.id),"PUT",void 0,t.token).then((function(e){return console.log(e)}))}));var t}}}))((function(e){var n=Object(a.useState)("dashboard"),t=Object(c.a)(n,2),r=t[0],o=t[1],i=function(n){var t=u.a.load("auth");n.token=t,e.handleDelete(n)},s=function(n){e.handleDetails(n)},d=function(n,t){console.log(e.jobs.jobList[0]._id);var a=u.a.load("auth"),l={price:t};e.handlePlaceBid({id:n,body:l,token:a})};return Object(a.useEffect)((function(){e.handleGetJobs()})),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"App"},l.a.createElement(T,null),l.a.createElement(m,{condition:!e.login.loggedIn},l.a.createElement(f,null,l.a.createElement(V,null)),l.a.createElement(b,null,l.a.createElement(q,{setScreen:o}),l.a.createElement(h,{condition:"main"===r},l.a.createElement(_,{jobs:e.jobs.jobList,handleDetails:s,handleDelete:i,handleBid:d})),l.a.createElement(h,{condition:"dashboard"===r},l.a.createElement(D,{addJob:function(n){var t=u.a.load("auth");n.token=t,n.complete=!1,e.handlePost(n)},jobs:e.jobs.jobList,handleDetails:s,handleDelete:i,handleCloseJob:function(n){var t=u.a.load("auth");e.handleCloseJob({id:n,token:t})}})),l.a.createElement(h,{condition:e.jobs.showDetails},l.a.createElement(J,{handleDetails:s,item:e.jobs.details,placeBid:d})),l.a.createElement(I,null)))))})),ee=t(8),ne=t(175),te=t(403),ae=t(176),le=t(177),re={jobList:[{}],showDetails:null,details:{}},oe=u.a.load("auth");console.log(oe);var ce=oe||null;console.log(ce);var ie={token:ce,loggedIn:!!ce,signupStatus:null,loginStatus:null,user:ce?S.a.verify(ce,"sauce"):null},ue=Object(ee.combineReducers)({jobs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,n=arguments.length>1?arguments[1]:void 0,t=n.type,a=n.payload;switch(t){case"DETAILS":var l=e.jobList.filter((function(e){return e._id===a}))[0]||{};return Object(v.a)({},e,{showDetails:!e.showDetails,details:l});case"GET":return Object(v.a)({},e,{jobList:a});case"POST":return Object(v.a)({},e,{jobList:[].concat(Object(le.a)(e.jobList),[a])});case"TOGGLE":return Object(v.a)({},e,{jobList:e.todoList.map((function(e){return e._id===a?Object(v.a)({},e,{complete:!e.complete}):e}))});case"DELETE":return Object(v.a)({},e,{jobList:e.jobList.filter((function(e){return e._id!==a}))});default:return e}},form:te.a,login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,n=arguments.length>1?arguments[1]:void 0,t=n.type,a=n.payload;switch(t){case"LOGIN":var l;return l=a.data?S.a.verify(a.data,"sauce"):null,{token:a.data,loggedIn:a.loggedIn,loginStatus:a.loginStatus,user:l};case"SIGN_UP_SUCCESS":return u.a.save("auth",a),{token:a,loggedIn:!0,user:S.a.verify(a,"sauce")||null};case"SIGN_UP_FAIL":return{signupStatus:a};case"LOGOUT":return u.a.remove("auth"),{token:null,loggedIn:!1,signupStatus:null,loginStatus:null,user:""};default:return e}}}),se=function(){return Object(ee.createStore)(ue,Object(ne.composeWithDevTools)(Object(ee.applyMiddleware)(ae.a)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=se();o.a.render(l.a.createElement(s.a,{store:de},l.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[181,1,2]]]);
//# sourceMappingURL=main.5c4b1edd.chunk.js.map