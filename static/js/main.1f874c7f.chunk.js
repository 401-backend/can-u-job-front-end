(this["webpackJsonpcan-u-front-end"]=this["webpackJsonpcan-u-front-end"]||[]).push([[0],{181:function(e,n,t){e.exports=t(390)},186:function(e,n,t){},191:function(e,n,t){},289:function(e,n,t){},290:function(e,n,t){},294:function(e,n){},296:function(e,n){},333:function(e,n){},334:function(e,n){},390:function(e,n,t){"use strict";t.r(n);var a=t(0),l=t.n(a),r=t(65),o=t.n(r),c=(t(186),t(13)),u=t(18),i=t.n(u),s=t(11),d=(t(191),function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?n:null}),m=function(e){return l.a.Children.map(e.children,(function(n){return l.a.cloneElement(n,{condition:e.condition})}))},h=function(e){return d(e.condition,e.children)},b=function(e){return d(!e.condition,e.children)},f=function(e){return d(e.condition,e.children)},E=t(392),p=t(391),g=t(66),v=t(22),j=function(e){var n=Object(a.useState)({}),t=Object(c.a)(n,2),l=t[0],r=t[1];return{handleChange:function(e){e.persist(),r((function(n){return Object(v.a)({},n,Object(g.a)({},e.target.name,e.target.value))}))},handleSubmit:function(n){n&&n.preventDefault(),e(l)},values:l}},y=Object(p.a)({form:"jobs"})((function(e){var n=j(e.handleSubmit),t=n.handleChange,a=n.handleSubmit;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Add Job"),l.a.createElement("form",{onChange:t,onSubmit:a},l.a.createElement("label",null,l.a.createElement("span",null,"Job"),l.a.createElement(E.a,{name:"name",component:"input",placeholder:"Add Job"})),l.a.createElement("label",null,l.a.createElement("span",null,"Price"),l.a.createElement(E.a,{name:"price",type:"number",component:"input",placeholder:"Price"})),l.a.createElement("label",null,l.a.createElement("span",null,"Description"),l.a.createElement(E.a,{name:"description",type:"textarea",component:"input"})),l.a.createElement("button",null,"Add Job")))})),O=Object(s.b)((function(e){return{user:e.login.user}}),(function(e,n){return{}}))((function(e){var n=e.jobs.filter((function(n){return n.postedBy===e.user}));console.log([e.user]);var t=n.map((function(n){return l.a.createElement("tr",{key:n._id},l.a.createElement("td",null,n.name),l.a.createElement("td",null,n.price),l.a.createElement("td",null,n.description),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return e.handleDelete(n)}},"Delete")),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return e.handleDetails(n._id)}},"Details")))}));return l.a.createElement("div",{className:"myjob-table"},l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",{key:"headings"},l.a.createElement("td",null,"Name"),l.a.createElement("td",null,"Bid"),l.a.createElement("td",null,"Description")),t)))})),S=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(y,{handleSubmit:e.addJob}),l.a.createElement(O,{jobs:e.jobs,handleDetails:e.handleDetails,handleDelete:e.handleDelete}))},k=t(172),D=t(173),C=t(178),L=t(174),T=t(179),w=(t(289),function(e){function n(){return Object(k.a)(this,n),Object(C.a)(this,Object(L.a)(n).apply(this,arguments))}return Object(T.a)(n,e),Object(D.a)(n,[{key:"render",value:function(){return l.a.createElement("footer",null,l.a.createElement("section",null,l.a.createElement("p",null,"\xa9 Can-U 2020")))}}]),n}(l.a.Component)),I=(t(290),function(e){return l.a.createElement("div",{className:"modal"},l.a.createElement("div",null,l.a.createElement("header",null,l.a.createElement("span",{className:"title"},e.title),l.a.createElement("button",{onClick:e.close},"X")),l.a.createElement("div",null,e.children)))}),P=function(e){var n=e.item||{};return l.a.createElement(I,{title:"Job",close:e.handleDetails},l.a.createElement("div",null,l.a.createElement("span",null,"Name: ",n.name),l.a.createElement("span",null,"Description: ",n.description),l.a.createElement("span",null,"Price: ",n.price),l.a.createElement("span",null,"Posted by: ",n.postedUser)))};var _=function(e){var n=e.jobs.map((function(n){return l.a.createElement("tr",{key:n._id},l.a.createElement("td",null,n.name),l.a.createElement("td",null,n.price),l.a.createElement("td",null,n.postedUser),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return e.handleDetails(n._id)}},"Details")),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return e.handleDelete(n._id)}},"DELETE")))}));return l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",{key:"headings"},l.a.createElement("td",null,"Name"),l.a.createElement("td",null,"Bid"),l.a.createElement("td",null,"Owner")),n))},G=function(e){return l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("span",{onClick:function(){return e.setScreen("dashboard")}},"Dashboard")),l.a.createElement("li",null,l.a.createElement("span",{onClick:function(){return e.setScreen("main")}},"Main"))))},U=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get",t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;return fetch(e,{method:n,mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a},body:t?JSON.stringify(t):void 0}).then((function(e){return e.json()})).then((function(e){return"function"===typeof l?l(e):e})).catch((function(e){return"function"===typeof r?r(e):console.error(e)}))},J="https://dry-shore-68165.herokuapp.com",N=function(e){return{type:"GET",payload:e}},A=function(e){return{type:"POST",payload:e}},B=function(e){return{type:"DELETE",payload:e}},F=function(e){return function(n){return console.log(J),(t="".concat(J,"/signin"),a=e,fetch(t,{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Basic ".concat(a)},body:void 0}).then((function(e){return e.text()})).then((function(e){return'{"error":"Invalid User ID/Password"}'===e?{loggedIn:!1,data:null}:(console.log("signin data",e),i.a.save("auth",e),{loggedIn:!0,data:e})})).catch((function(e){return"function"===typeof l?l(e):console.error(e)}))).then((function(e){return n(x(e))}));var t,a,l}},x=function(e){return console.log("login",e),{type:"LOGIN",payload:e}},W=function(e){return function(n){return(t="".concat(J,"/signup"),a=e,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0}).then((function(e){if(500===e.status)return"username taken";var n=e.text();return i.a.save("auth",n),n})).catch((function(e){return"function"===typeof l?l(e):console.error(e)}))).then((function(e){console.log("fetch result",e),n("username taken"===e?M(e):z(e))}));var t,a,l}},z=function(e){return{type:"SIGN_UP_SUCCESS",payload:e}},M=function(e){return{type:"SIGN_UP_FAIL",payload:e}},R=Object(s.b)((function(e){return{}}),(function(e,n){return{handleSignIn:function(n){return e(F(n))}}}))((function(e){var n=Object(a.useState)(""),t=Object(c.a)(n,2),r=t[0],o=t[1],u=Object(a.useState)(""),i=Object(c.a)(u,2),s=i[0],d=i[1],m=function(e){switch(e.target.name){case"username":o(e.target.value);break;case"password":d(e.target.value)}};return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(n){n.preventDefault(),console.log("signin",r,s);var t=btoa("".concat(r,":").concat(s));console.log("encoded",t),e.handleSignIn(t)}},l.a.createElement("input",{placeholder:"username",name:"username",onChange:m}),l.a.createElement("input",{placeholder:"password",name:"password",onChange:m}),l.a.createElement("input",{type:"submit",value:"Log In"})),l.a.createElement("p",{onClick:function(){e.switchLogin("signup")},style:{cursor:"pointer"}},"Not a member?.. click to sign up"))})),X=Object(s.b)((function(e){return{login:e.login}}),(function(e,n){return{handleSignUp:function(n){return e(W(n))}}}))((function(e){var n=Object(a.useState)(""),t=Object(c.a)(n,2),r=t[0],o=t[1],u=Object(a.useState)(""),i=Object(c.a)(u,2),s=i[0],d=i[1],m=Object(a.useState)(""),h=Object(c.a)(m,2),b=h[0],f=h[1],E=function(e){switch(e.target.name){case"username":o(e.target.value);break;case"password":d(e.target.value);break;case"email":f(e.target.value)}};return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(n){n.preventDefault(),console.log("signup",r,b,s);var t={username:r,password:s,email:b};e.handleSignUp(t)}},l.a.createElement("label",null,l.a.createElement("input",{placeholder:"email",name:"email",onChange:E})),l.a.createElement("label",null,l.a.createElement("input",{placeholder:"username",name:"username",onChange:E})),l.a.createElement("label",null,l.a.createElement("input",{placeholder:"password",name:"password",onChange:E})),l.a.createElement("input",{type:"submit",value:"Sign Up"})),l.a.createElement("p",null,e.login.signupStatus),l.a.createElement("p",{onClick:function(){e.switchLogin("signin")},style:{cursor:"pointer"}},"Already a member?.. click to login"))})),$=function(e){var n=Object(a.useState)("signin"),t=Object(c.a)(n,2),r=t[0],o=t[1],u=function(e){o(e)};return l.a.createElement("div",null,l.a.createElement(m,{condition:"signup"===r},l.a.createElement(h,null,l.a.createElement(X,{switchLogin:u})),l.a.createElement(b,null,l.a.createElement(R,{switchLogin:u}))))},q=function(e){return l.a.createElement("div",null,l.a.createElement("h1",null,"Welcome to Can-U"),l.a.createElement("p",null,"This is some information describing our app blah blah blah blahblah blah blahblah blahblahblahblahblahblahblahblah blah"),l.a.createElement($,null))};var H=Object(s.b)((function(e){return{jobs:e.jobs,login:e.login}}),(function(e,n){return{handleGetJobs:function(){return e((function(e){return U("".concat(J,"/jobs"),"GET").then((function(n){return e(N(n.results))})).catch(console.error)}))},handleDetails:function(n){return e({type:"DETAILS",payload:n})},handlePost:function(n){return e((t=n,function(e){return U("".concat(J,"/jobs"),"POST",t,t.token).then((function(n){return e(A(n))})).catch(console.error)}));var t},handleToggle:function(n){return e({type:"TOGGLE",payload:n})},handleDelete:function(n){return e((t=n,function(e){return U("".concat(J,"/jobs/").concat(t._id),"DELETE","",t.token).then((function(){return e(B(t.id))})).catch((function(e){return console.log(e)}))}));var t},handlePlaceBid:function(n){return e((t=n,function(e){return U("".concat(J,"/jobs/bid/").concat(t.id),"PUT",t.body,t.token).then((function(e){return console.log(e)}))}));var t},handleGetUsers:function(n){return e((t=n,function(e){return U("".concat(J,"/users"),"GET","",t.token).then((function(e){return console.log(e)}))}));var t},handleCloseJob:function(){return e((function(e){return U("".concat(J,"/jobs/close/").concat(n.id),"PUT",n.token).then((function(e){return console.log(e)}))}));var n}}}))((function(e){var n=Object(a.useState)("dashboard"),t=Object(c.a)(n,2),r=t[0],o=t[1],u=function(n){var t=i.a.load("auth");n.token=t,e.handleDelete(n)},s=function(n){e.handleDetails(n)};return Object(a.useEffect)((function(){e.handleGetJobs()})),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"App"},l.a.createElement(m,{condition:!e.login.loggedIn},l.a.createElement(h,null,l.a.createElement(q,null)),l.a.createElement(b,null,l.a.createElement(G,{setScreen:o}),l.a.createElement("button",{onClick:function(n){var t=i.a.load("auth");n.token=t,e.handleGetUsers(n)}},"GET USERS TEST"),l.a.createElement("button",{onClick:function(){console.log(e.jobs.jobList[0]._id);var n=i.a.load("auth"),t=e.jobs.jobList[0]._id;e.handlePlaceBid({id:t,body:{price:10},token:n})}},"PLACE BID TEST"),l.a.createElement("button",{onClick:function(){var n=i.a.load("auth"),t=e.jobs.jobList[0]._id;e.handleCloseJob({id:t,token:n})}},"CLOSE JOB TEST"),l.a.createElement(f,{condition:"main"===r},l.a.createElement(_,{jobs:e.jobs.jobList,handleDetails:s,handleDelete:u})),l.a.createElement(f,{condition:"dashboard"===r},l.a.createElement(S,{addJob:function(n){var t=i.a.load("auth");n.token=t,n.complete=!1,e.handlePost(n)},jobs:e.jobs.jobList,handleDetails:s,handleDelete:u})),l.a.createElement(f,{condition:e.jobs.showDetails},l.a.createElement(P,{handleDetails:s,item:e.jobs.details})),l.a.createElement(w,null)))))})),K=t(7),Q=t(175),V=t(393),Y=t(176),Z=t(177),ee={jobList:[{}],showDetails:null,details:{}},ne=t(103),te=t.n(ne),ae=i.a.load("auth")||null,le={token:ae,loggedIn:!!ae,signupStatus:null,user:""},re=Object(K.combineReducers)({jobs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,n=arguments.length>1?arguments[1]:void 0,t=n.type,a=n.payload;switch(t){case"DETAILS":var l=e.jobList.filter((function(e){return e._id===a}))[0]||{};return Object(v.a)({},e,{showDetails:!e.showDetails,details:l});case"GET":return Object(v.a)({},e,{jobList:a});case"POST":return Object(v.a)({},e,{jobList:[].concat(Object(Z.a)(e.jobList),[a])});case"TOGGLE":return Object(v.a)({},e,{jobList:e.todoList.map((function(e){return e._id===a?Object(v.a)({},e,{complete:!e.complete}):e}))});case"DELETE":return Object(v.a)({},e,{jobList:e.jobList.filter((function(e){return e._id!==a}))});default:return e}},form:V.a,login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,n=arguments.length>1?arguments[1]:void 0,t=n.type,a=n.payload;switch(t){case"LOGIN":return console.log("reducer payload",a),{token:a.data,loggedIn:a.loggedIn,user:te.a.verify(a.data,"sauce")};case"SIGN_UP_SUCCESS":return{token:a,loggedIn:!0,user:te.a.verify(a,"sauce")};case"SIGN_UP_FAIL":return{signupStatus:a};default:return e}}}),oe=function(){return Object(K.createStore)(re,Object(Q.composeWithDevTools)(Object(K.applyMiddleware)(Y.a)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ce=oe();o.a.render(l.a.createElement(s.a,{store:ce},l.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[181,1,2]]]);
//# sourceMappingURL=main.1f874c7f.chunk.js.map