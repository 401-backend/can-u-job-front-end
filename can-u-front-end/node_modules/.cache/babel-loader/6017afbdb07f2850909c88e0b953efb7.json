{"ast":null,"code":"import jwt from 'jsonwebtoken';\nimport cookie from \"react-cookies\";\nconst cookieToken = cookie.load(\"auth\");\nconst token = cookieToken || null;\nconst initialState = {\n  token: token,\n  loggedIn: !!token,\n  signupStatus: null,\n  loginStatus: null,\n  user: ''\n};\n/**\n * Reducer for login state\n * @param {object} state\n * @param {object} action\n */\n\nexport default ((state = initialState, action) => {\n  let {\n    type,\n    payload\n  } = action;\n\n  switch (type) {\n    case \"LOGIN\":\n      console.log('reducer payload', payload);\n      let userInfo;\n\n      if (payload.data) {\n        userInfo = jwt.verify(payload.data, `sauce`);\n      } else {\n        userInfo = null;\n      }\n\n      return {\n        token: payload.data,\n        loggedIn: payload.loggedIn,\n        loginStatus: payload.loginStatus,\n        user: userInfo\n      };\n\n    case \"SIGN_UP_SUCCESS\":\n      return {\n        token: payload,\n        loggedIn: true,\n        user: jwt.verify(payload, `sauce`) || null\n      };\n\n    case \"SIGN_UP_FAIL\":\n      return {\n        signupStatus: payload\n      };\n\n    case \"LOGOUT\":\n      cookie.remove('auth');\n      return {\n        token: null,\n        loggedIn: false,\n        signupStatus: null,\n        loginStatus: null,\n        user: ''\n      };\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["/Users/nataliealway/devstation/401-backend/can-u-job-front-end/can-u-front-end/src/store/login-reducer.js"],"names":["jwt","cookie","cookieToken","load","token","initialState","loggedIn","signupStatus","loginStatus","user","state","action","type","payload","console","log","userInfo","data","verify","remove"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,cAAhB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AAEA,MAAMC,WAAW,GAAGD,MAAM,CAACE,IAAP,CAAY,MAAZ,CAApB;AACA,MAAMC,KAAK,GAAGF,WAAW,IAAI,IAA7B;AAEA,MAAMG,YAAY,GAAG;AACnBD,EAAAA,KAAK,EAAEA,KADY;AAEnBE,EAAAA,QAAQ,EAAE,CAAC,CAACF,KAFO;AAGnBG,EAAAA,YAAY,EAAE,IAHK;AAInBC,EAAAA,WAAW,EAAE,IAJM;AAKnBC,EAAAA,IAAI,EAAE;AALa,CAArB;AASA;;;;;;AAKA,gBAAe,CAACC,KAAK,GAAGL,YAAT,EAAuBM,MAAvB,KAAkC;AAC/C,MAAI;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAoBF,MAAxB;;AACA,UAAQC,IAAR;AACE,SAAK,OAAL;AACEE,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BF,OAA/B;AACA,UAAIG,QAAJ;;AACA,UAAGH,OAAO,CAACI,IAAX,EAAgB;AACdD,QAAAA,QAAQ,GAAGhB,GAAG,CAACkB,MAAJ,CAAWL,OAAO,CAACI,IAAnB,EAA0B,OAA1B,CAAX;AACD,OAFD,MAEM;AACJD,QAAAA,QAAQ,GAAG,IAAX;AACD;;AACD,aAAO;AACLZ,QAAAA,KAAK,EAAES,OAAO,CAACI,IADV;AAELX,QAAAA,QAAQ,EAAEO,OAAO,CAACP,QAFb;AAGLE,QAAAA,WAAW,EAAEK,OAAO,CAACL,WAHhB;AAILC,QAAAA,IAAI,EAAEO;AAJD,OAAP;;AAMF,SAAK,iBAAL;AACE,aAAO;AACLZ,QAAAA,KAAK,EAAES,OADF;AAELP,QAAAA,QAAQ,EAAE,IAFL;AAGLG,QAAAA,IAAI,EAAET,GAAG,CAACkB,MAAJ,CAAWL,OAAX,EAAqB,OAArB,KAAgC;AAHjC,OAAP;;AAMA,SAAK,cAAL;AACE,aAAO;AACLN,QAAAA,YAAY,EAAEM;AADT,OAAP;;AAGF,SAAK,QAAL;AACEZ,MAAAA,MAAM,CAACkB,MAAP,CAAc,MAAd;AACA,aAAO;AACLf,QAAAA,KAAK,EAAE,IADF;AAELE,QAAAA,QAAQ,EAAE,KAFL;AAGLC,QAAAA,YAAY,EAAE,IAHT;AAILC,QAAAA,WAAW,EAAE,IAJR;AAKLC,QAAAA,IAAI,EAAE;AALD,OAAP;;AAOJ;AACE,aAAOC,KAAP;AApCJ;AAsCD,CAxCD","sourcesContent":["import jwt from 'jsonwebtoken';\nimport cookie from \"react-cookies\";\n\nconst cookieToken = cookie.load(\"auth\");\nconst token = cookieToken || null;\n\nconst initialState = {\n  token: token,\n  loggedIn: !!token,\n  signupStatus: null,\n  loginStatus: null,\n  user: '',\n\n};\n\n/**\n * Reducer for login state\n * @param {object} state\n * @param {object} action\n */\nexport default (state = initialState, action) => {\n  let { type, payload } = action;\n  switch (type) {\n    case \"LOGIN\":\n      console.log('reducer payload', payload);\n      let userInfo;\n      if(payload.data){\n        userInfo = jwt.verify(payload.data, `sauce`);\n      }else {\n        userInfo = null;\n      }\n      return {\n        token: payload.data,\n        loggedIn: payload.loggedIn,\n        loginStatus: payload.loginStatus,\n        user: userInfo\n      }\n    case \"SIGN_UP_SUCCESS\":\n      return {\n        token: payload,\n        loggedIn: true,\n        user: jwt.verify(payload, `sauce`) || null\n\n      }\n      case \"SIGN_UP_FAIL\":\n        return {\n          signupStatus: payload,\n        }\n      case \"LOGOUT\":\n        cookie.remove('auth');\n        return {\n          token: null,\n          loggedIn: false,\n          signupStatus: null,\n          loginStatus: null,\n          user: '',\n        }\n    default:\n      return state;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}