{"ast":null,"code":"import jwt from 'jsonwebtoken';\nimport cookie from \"react-cookies\";\nconst cookieToken = cookie.load(\"auth\");\nconst token = cookieToken || null;\nconst initialState = {\n  token: token,\n  loggedIn: !!token,\n  signupStatus: null,\n  loginStatus: null,\n  user: token ? jwt.verify(token, 'sauce') : null\n};\n/**\n * Reducer for login state\n * @param {object} state\n * @param {object} action\n */\n\nexport default ((state = initialState, action) => {\n  let {\n    type,\n    payload\n  } = action;\n\n  switch (type) {\n    case \"LOGIN\":\n      let userInfo;\n\n      if (payload.data) {\n        userInfo = jwt.verify(payload.data, `sauce`);\n      } else {\n        userInfo = null;\n      }\n\n      return {\n        token: payload.data,\n        loggedIn: payload.loggedIn,\n        loginStatus: payload.loginStatus,\n        user: userInfo\n      };\n\n    case \"SIGN_UP_SUCCESS\":\n      return {\n        token: payload,\n        loggedIn: true,\n        user: jwt.verify(payload, `sauce`) || null\n      };\n\n    case \"SIGN_UP_FAIL\":\n      return {\n        signupStatus: payload\n      };\n\n    case \"LOGOUT\":\n      cookie.remove('auth');\n      return {\n        token: null,\n        loggedIn: false,\n        signupStatus: null,\n        loginStatus: null,\n        user: ''\n      };\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["/Users/nataliealway/devstation/401-backend/can-u-job-front-end/can-u-front-end/src/store/login-reducer.js"],"names":["jwt","cookie","cookieToken","load","token","initialState","loggedIn","signupStatus","loginStatus","user","verify","state","action","type","payload","userInfo","data","remove"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,cAAhB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AAEA,MAAMC,WAAW,GAAGD,MAAM,CAACE,IAAP,CAAY,MAAZ,CAApB;AACA,MAAMC,KAAK,GAAGF,WAAW,IAAI,IAA7B;AAEA,MAAMG,YAAY,GAAG;AACnBD,EAAAA,KAAK,EAAEA,KADY;AAEnBE,EAAAA,QAAQ,EAAE,CAAC,CAACF,KAFO;AAGnBG,EAAAA,YAAY,EAAE,IAHK;AAInBC,EAAAA,WAAW,EAAE,IAJM;AAKnBC,EAAAA,IAAI,EAAGL,KAAD,GAAUJ,GAAG,CAACU,MAAJ,CAAWN,KAAX,EAAkB,OAAlB,CAAV,GAAuC;AAL1B,CAArB;AAQA;;;;;;AAKA,gBAAe,CAACO,KAAK,GAAGN,YAAT,EAAuBO,MAAvB,KAAkC;AAC/C,MAAI;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAoBF,MAAxB;;AACA,UAAQC,IAAR;AACE,SAAK,OAAL;AACE,UAAIE,QAAJ;;AACA,UAAGD,OAAO,CAACE,IAAX,EAAgB;AACdD,QAAAA,QAAQ,GAAGf,GAAG,CAACU,MAAJ,CAAWI,OAAO,CAACE,IAAnB,EAA0B,OAA1B,CAAX;AACD,OAFD,MAEM;AACJD,QAAAA,QAAQ,GAAG,IAAX;AACD;;AACD,aAAO;AACLX,QAAAA,KAAK,EAAEU,OAAO,CAACE,IADV;AAELV,QAAAA,QAAQ,EAAEQ,OAAO,CAACR,QAFb;AAGLE,QAAAA,WAAW,EAAEM,OAAO,CAACN,WAHhB;AAILC,QAAAA,IAAI,EAAEM;AAJD,OAAP;;AAMF,SAAK,iBAAL;AACE,aAAO;AACLX,QAAAA,KAAK,EAAEU,OADF;AAELR,QAAAA,QAAQ,EAAE,IAFL;AAGLG,QAAAA,IAAI,EAAET,GAAG,CAACU,MAAJ,CAAWI,OAAX,EAAqB,OAArB,KAAgC;AAHjC,OAAP;;AAMA,SAAK,cAAL;AACE,aAAO;AACLP,QAAAA,YAAY,EAAEO;AADT,OAAP;;AAGF,SAAK,QAAL;AACEb,MAAAA,MAAM,CAACgB,MAAP,CAAc,MAAd;AACA,aAAO;AACLb,QAAAA,KAAK,EAAE,IADF;AAELE,QAAAA,QAAQ,EAAE,KAFL;AAGLC,QAAAA,YAAY,EAAE,IAHT;AAILC,QAAAA,WAAW,EAAE,IAJR;AAKLC,QAAAA,IAAI,EAAE;AALD,OAAP;;AAOJ;AACE,aAAOE,KAAP;AAnCJ;AAqCD,CAvCD","sourcesContent":["import jwt from 'jsonwebtoken';\nimport cookie from \"react-cookies\";\n\nconst cookieToken = cookie.load(\"auth\");\nconst token = cookieToken || null;\n\nconst initialState = {\n  token: token,\n  loggedIn: !!token,\n  signupStatus: null,\n  loginStatus: null,\n  user: (token) ? jwt.verify(token, 'sauce') : null,\n};\n\n/**\n * Reducer for login state\n * @param {object} state\n * @param {object} action\n */\nexport default (state = initialState, action) => {\n  let { type, payload } = action;\n  switch (type) {\n    case \"LOGIN\":\n      let userInfo;\n      if(payload.data){\n        userInfo = jwt.verify(payload.data, `sauce`);\n      }else {\n        userInfo = null;\n      }\n      return {\n        token: payload.data,\n        loggedIn: payload.loggedIn,\n        loginStatus: payload.loginStatus,\n        user: userInfo\n      }\n    case \"SIGN_UP_SUCCESS\":\n      return {\n        token: payload,\n        loggedIn: true,\n        user: jwt.verify(payload, `sauce`) || null\n\n      }\n      case \"SIGN_UP_FAIL\":\n        return {\n          signupStatus: payload,\n        }\n      case \"LOGOUT\":\n        cookie.remove('auth');\n        return {\n          token: null,\n          loggedIn: false,\n          signupStatus: null,\n          loginStatus: null,\n          user: '',\n        }\n    default:\n      return state;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}